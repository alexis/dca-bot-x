<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bot Details - {{ bot.name }}</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container mt-4" style="max-width: 800px">
      <h1 class="text-center mb-4">Bot Details</h1>

      <div class="card">
        <div class="card-body">
          <h4 class="card-title">{{ bot.name }}</h4>
          <p class="card-text">
            <strong>Created At:</strong> {{ bot.created_at.strftime('%Y-%m-%d %H:%M:%S') }}<br />
            <strong>Number of Completed Cycles:</strong> {{ trading_service.old_cycles().count() }}<br />
            <strong>Taken Profit (Completed Cycles):</strong> {{ trading_service.old_cycles_profit() }} USDT<br />
          </p>
        </div>
      </div>

      <div class="card mt-4">
        <div class="card-body">
          <h4 class="card-title">Next Cycle Settings</h4>
          <p class="card-text">
            <strong>Starting automatically:</strong> {{ bot.is_active }}<br />
            <strong>Symbol:</strong> {{ bot.symbol }}<br />
            <strong>Amount:</strong> {{ bot.amount | round(2)}} USDT<br />
            <strong>Grid Length:</strong> {{ bot.grid_length }}%<br />
            <strong>First Order Offset:</strong> {{ bot.first_order_offset }}%<br />
            <strong>Number of Orders:</strong> {{ bot.num_orders }}<br />
            <strong>Next Order Volume:</strong> {{ bot.next_order_volume }}%<br />
            <strong>Price Change Percentage:</strong> {{ bot.price_change_percentage }}%<br />
            <strong>Profit Percentage:</strong> {{ bot.profit_percentage }}%<br />
            <strong>Updated At:</strong> {{ bot.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}<br />
          </p>
        </div>
      </div>

      {% if current_cycle %}
      <div class="card mt-4">
        <div class="card-body">
          <h4 class="card-title">Current Cycle Settings</h4>
          <p class="card-text">
            <strong>Status:</strong> {{ current_cycle.status }}<br />
            <strong>Symbol:</strong> {{ current_cycle.symbol }}<br />
            <strong>Amount:</strong> {{ current_cycle.amount | round(2)}} USDT<br />
            <strong>Grid Length:</strong> {{ current_cycle.grid_length }}%<br />
            <strong>First Order Offset:</strong> {{ current_cycle.first_order_offset }}%<br />
            <strong>Number of Orders:</strong> {{ current_cycle.num_orders }}<br />
            <strong>Next Order Volume:</strong> {{ current_cycle.next_order_volume }}%<br />
            <strong>Price Change Percentage:</strong> {{ current_cycle.price_change_percentage }}%<br />
            <strong>Profit Percentage:</strong> {{ current_cycle.profit_percentage }}%<br />
            <strong>Started At:</strong> {{ current_cycle.created_at.strftime('%Y-%m-%d %H:%M:%S') }}<br />
          </p>
        </div>
      </div>
      {% endif %}

      <div class="mt-4">
        <a href="/bots" class="btn btn-dark">Bots List</a>
        <a href="/bots/{{ bot.id }}/dashboard" class="btn btn-primary">Bot Dashboard</a>
      </div>
    </div>
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
